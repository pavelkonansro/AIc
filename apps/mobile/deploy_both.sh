#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω
# –ê–≤—Ç–æ—Ä: AI Assistant
# –î–∞—Ç–∞: $(date)

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π AIc Mobile –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä –∏ —Ç–µ–ª–µ—Ñ–æ–Ω..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
echo "üì± –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞..."
flutter devices

echo ""
echo "üì≤ –î–µ–ø–ª–æ–π –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä iPhone 16 Pro..."
flutter run -d "iPhone 16 Pro" &
SIMULATOR_PID=$!

# –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ —Å–∏–º—É–ª—è—Ç–æ—Ä
sleep 30

echo ""
echo "üì± –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞..."
PHONE_DEVICE=$(flutter devices | grep -E "iPhone.*\(mobile\)" | grep -v "simulator" | head -1 | awk '{print $1}')

if [ -n "$PHONE_DEVICE" ]; then
    echo "‚úÖ –§–∏–∑–∏—á–µ—Å–∫–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞–π–¥–µ–Ω: $PHONE_DEVICE"
    echo "üì≤ –î–µ–ø–ª–æ–π –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω..."
    flutter run -d "$PHONE_DEVICE"
else
    echo "‚ùå –§–∏–∑–∏—á–µ—Å–∫–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞:"
    echo "1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ iPhone –∫ Mac —á–µ—Ä–µ–∑ USB-–∫–∞–±–µ–ª—å"
    echo "2. –†–∞–∑–±–ª–æ–∫–∏—Ä—É–π—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –¥–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—É"
    echo "3. –í–∫–ª—é—á–∏—Ç–µ —Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:"
    echo "   –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ ‚Üí –í–∫–ª—é—á–∏—Ç—å"
    echo "4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω"
    echo "5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞"
fi

echo ""
echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo "üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
echo "   r - Hot reload"
echo "   R - Hot restart" 
echo "   q - Quit"
echo "   d - Detach"

